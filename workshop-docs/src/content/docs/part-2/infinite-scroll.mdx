---
title: Infinite Scroll
description: Load more recipes automatically as user scrolls
---

import { Aside } from '@astrojs/starlight/components';

Instead of 10 recipes at a time as "pages", wouldn't it be better to load more recipes when the user scrolls to the bottom?

## Optional Side Quest First

:::caution[Side Quest]
Before you get started with infinite scroll, you might want to try upgrading the **Next** and **Previous** links to use HTMX.

Right now, choosing those buttons re-loads the full page, which clears the currently selected recipe detail. If you convert to HTMX, the page of results could target the `#recipe-list` column.

We won't go through the detailed steps because they are similar to what you've already done. Doing is learning, right? ðŸ˜Š
:::

## Implementing Infinite Scroll

The concept:

1. Add a trigger element at the bottom of the recipe list
2. When that element comes into view, fetch the next page
3. Append the new recipes to the existing list

### Key HTMX Attributes for Infinite Scroll

| Attribute | Purpose |
|-----------|---------|
| `hx-get` | URL to fetch next page of recipes |
| `hx-trigger` | `intersect once` â€” fires when element intersects its viewport one time |
| `hx-swap` | `outerHTML` â€” replace the entire content of the target |

## Example Implementation

### Step 1: Update the recipe_list_items template

Open `templates/recipe_list_items.html` and add the following at the end

```html title="templates/recipe_list_items.html" ins={1-8}
{% if page < total_pages %} 
<li>
    <span hx-target="closest li"
    hx-trigger="intersect once"
    hx-swap="outerHTML"
    hx-get="{{ url_for('recipes_li', page=page+1) }}">Loading Moreâ€¦</span>
</li>
{% endif %}
```

### Step 2: Remove the paging elements from recipe_list template 

Open `templates/recipe_list.html` and remove the following

```html title="templates/recipe_list.html" del={1-5}
<span class="current">Page {{ page }} of {{ total_pages }}</span>
{% if page < total_pages %}
<a href="{{ url_for('list_recipes', page=page+1) }}">Next</a>
{% endif %}
```

**Stop and restart the server.**

:::tip[Success!]
You should now have infinite scrolling!
:::


## How It Works

1. **Initial load**: Shows first 10 recipes plus a "trigger" element at the bottom
2. **User scrolls**: When trigger element becomes visible (`intersect once`), HTMX fetches next page
3. **Append**: New recipes are inserted, replacing the target `<li>` with actual content + new trigger
4. **Repeat**: Process continues until no more pages

Ready to explore an alternative approach? Check out [Part III: Datastar](/part-3/).
